!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e(t.hyperappLazyModules={})}(this,function(t){var e={};function n(t,e){return function(o,i){return n.modules=o,n.isFetching=i,n.app=t,n.container=e,{actions:{fetching:function(t){return function(){return{fetching:t}}},lazy:{fetching:function(){return function(){return{lazy:{fetching:!0,props:void 0}}}},loaded:function(t){return function(){return{lazy:{view:t,fetching:!1,props:void 0}}}}}},state:{fetching:!1,lazy:{view:null,fetching:!0,props:void 0}}}}}var o=Object.assign,i=function(t){return t.default?t.default:t},a=function(t){var i,a,r,c,s,u=t.state,f=e[t.module];return i={view:f.view,actions:o({},t.actions,f.actions),state:o({},u,f.state),props:t.props},a=i.view,r=i.actions,c=n.container,s=o(i.state,{lazy:{props:i.props,fetching:!1}}),void n.app(s,r,a,c)};t.createLazy=n,t.Lazy=function(t){var o=t.module,r=t.props;return function(t,c){return e[o]?a({module:o,state:t,actions:c,props:r}):(s={module:o,state:t,actions:c,props:r},Promise.all([n.modules[s.module].view,n.modules[s.module].actions,n.modules[s.module].state]).then(function(t){var n=t[1],o=t[2],a=i(t[0]);e[s.module]={view:a,state:i(o||{}),actions:i(n)},s.state.fetching&&s.actions.lazy.loaded(a,!1)}),!s.state.fetching&&s.actions.fetching(!0),s.state.fetching&&n.app(!0,{},n.isFetching(!0),n.container.children[0]));var s}}});
